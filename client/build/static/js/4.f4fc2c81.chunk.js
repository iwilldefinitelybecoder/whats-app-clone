(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{157:function(e,t,n){},213:function(e,t,n){"use strict";n.r(t);var c,a,r,o,s,i,l,u,d,b,j,p,x,h,O,f,g,v,m,w,y,k,C,F,S,I=n(59),E=n.n(I),A=n(60),D=n(57),T=n(0),z=n(84),P=n.n(z),_=n(54),M=n(225),R=n(230),U=n(231),L=n(92),W=n(26),B=n(221),N=n(27),G=n(7),H=n(203),V=n(202),K=n(220),Y=n(217),X=n(29),q=n.p+"static/media/chatpulse.8b79d8d5.png",J=q,Z=n(226),Q=n(223),$=n(201),ee=n(1),te=Object(_.a)(M.a)(c||(c=Object(D.a)(["\n    display: flex;\n    justify-content: center;\n"]))),ne=Object(_.a)("img")({width:200,height:200,borderRadius:"50%",padding:"25px 0"}),ce=Object(_.a)(M.a)(a||(a=Object(D.a)(["\n    background: #FFFFFF;\n    padding: 12px 30px 2px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n    & :first-child {\n        font-size: 13px;\n        color: #009688;\n        font-weight: 200;\n    };\n    & :last-child {\n        margin: 14px 0;\n        color: #4A4A4A;\n    }\n"]))),ae=Object(_.a)(M.a)(r||(r=Object(D.a)(["\n    padding: 15px 20px 28px 30px;\n    & > p {\n        color: #8696a0;\n        font-size: 13px;\n    }\n"]))),re=function(){var e=Object(T.useContext)(W.a).account;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(te,{children:Object(ee.jsx)(ne,{src:e.picture,alt:"displaypicture"})}),Object(ee.jsxs)(ce,{children:[Object(ee.jsx)(Z.a,{children:"Your name"}),Object(ee.jsx)(Z.a,{children:e.name})]}),Object(ee.jsx)(ae,{children:Object(ee.jsx)(Z.a,{children:"This is not your username or pin. This name will be visible to your WhatsApp contacts."})}),Object(ee.jsxs)(ce,{children:[Object(ee.jsx)(Z.a,{children:"About"}),Object(ee.jsx)(Z.a,{children:"Eat! Sleep! Code! Repeat"})]})]})},oe=Object(_.a)(M.a)(o||(o=Object(D.a)(["\n  background: #008069;\n  height: 107px;\n  color: #FFFFFF;\n  display: flex;\n  & > svg, & > p {\n    margin-top: auto;\n    padding: 15px;\n    font-weight: 600;\n"]))),se=Object(_.a)(M.a)(s||(s=Object(D.a)(["\n  background: #ededed;\n  height: 85%;\n"]))),ie=Object(_.a)(Z.a)(i||(i=Object(D.a)(["\n    font-size: 18px;\n"]))),le={left:20,top:17,height:"95%",width:"30%",boxShadow:"none"},ue=function(e){var t=e.open,n=e.setOpen,c=e.profile;return Object(ee.jsxs)(Q.a,{open:t,onClose:function(){n(!1)},PaperProps:{sx:le},style:{zIndex:1500},children:[Object(ee.jsxs)(oe,{children:[Object(ee.jsx)($.a,{onClick:function(){return n(!1)}}),Object(ee.jsx)(ie,{children:"Profile"})]}),Object(ee.jsx)(se,{children:c&&Object(ee.jsx)(re,{})})]})},de=Object(_.a)(K.a)(l||(l=Object(D.a)(["\n  background-color: #006AFF;\n  font-size: 18px;\n  padding: 15px 60px 5px 24px;\n  color: white;\n  \n  &:hover {\n    background-color:  #006AFF; /* Set your desired background color on hover */\n  }\n"]))),be=(Object(_.a)(X.c)(u||(u=Object(D.a)(["\n    border: none;\n    box-shadow: none;\n"]))),function(){var e=Object(T.useState)(!1),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(T.useState)(!1),r=Object(G.a)(a,2),o=r[0],s=r[1],i=Object(T.useContext)(W.a),l=i.setAccount,u=i.setShowloginButton,d=(i.showlogoutButton,i.setShowlogoutButton),b=Object(T.useContext)(N.a).setPerson,j=function(){c(null)};return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(V.a,{onClick:function(e){c(e.currentTarget)},style:{color:"white"}}),Object(ee.jsxs)(Y.a,{anchorEl:n,keepMounted:!0,open:n,onClose:j,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(ee.jsx)(de,{onClick:function(){j(),s(!0)},children:"Profile"}),Object(ee.jsx)(de,{onClick:function(){j(),console.clear(),P.a.remove("Gid"),console.clear(),d(!1),u(!0),l(""),b({}),window.location.reload()},children:"Logout"})]}),Object(ee.jsx)(ue,{open:o,setOpen:s,profile:!0})]})}),je=Object(_.a)(M.a)(d||(d=Object(D.a)(["\n    height: 44px;\n    background: black;\n    display: flex;\n    padding: 8px 16px;\n    align-items: center;\n"]))),pe=Object(_.a)(M.a)(b||(b=Object(D.a)(["\n    margin-left: auto;\n    & > * {\n        margin-left: 2px;\n        padding: 8px;\n        color: #000;\n    };\n    & :first-child {\n        font-size: 22px;\n        margin-right: 8px;\n        margin-top: 3px;\n    }\n"]))),xe=Object(_.a)("img")({height:40,width:40,borderRadius:"50%",boxShadow:"-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)"}),he=function(){var e=Object(T.useState)(!1),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(T.useContext)(W.a).account;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(je,{children:[Object(ee.jsx)(xe,{src:a.picture,onClick:function(){c(!0)}}),Object(ee.jsxs)(pe,{children:[Object(ee.jsx)(H.a,{sx:{color:"white"}}),Object(ee.jsx)(be,{})]})]}),Object(ee.jsx)(ue,{open:n,setOpen:c,profile:!0})]})},Oe=n(219),fe=n(205),ge=Object(_.a)(M.a)(j||(j=Object(D.a)(["\n    background: black;\n    height: 45px;\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #F2F2F2;\n    padding:5px 2px 5px 2px\n"]))),ve=Object(_.a)(M.a)(p||(p=Object(D.a)(["\n    position: relative;\n    border-radius: 10px;\n    background-color:#0b71ff;\n    margin: 0 13px;\n    width: 100%;\n    color:white;\n"]))),me=Object(_.a)(M.a)(x||(x=Object(D.a)(["\ncolor:white;\n    padding: 8px;\n    height: 100%;\n    position: absolute;\n"]))),we=Object(_.a)(Oe.a)(h||(h=Object(D.a)(["\n    width: 100%;\n    padding: 16px;\n    padding-left: 65px;\n    font-size: 14px;\n    height: 15px;\n    width: 100%;\n    color:white;\n    border-radius:10px;\n"]))),ye=function(e){var t=e.setText;return Object(ee.jsx)(ge,{children:Object(ee.jsxs)(ve,{sx:{boxShadow:6},children:[Object(ee.jsx)(me,{children:Object(ee.jsx)(fe.a,{fontSize:"small"})}),Object(ee.jsx)(we,{sx:{boxShadow:"-px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)"},placeholder:"Search or start new chat",inputProps:{"aria-label":"search"},onChange:function(e){return t(e.target.value)}})]})})},ke=n(206),Ce=n(133),Fe=n.n(Ce),Se="http://localhost:8000",Ie=function(){var e=Object(A.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/add"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling addUser API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(A.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.get("".concat(Se,"/users"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getUsers API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/conversation/add"),t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error while calling setConversation API ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(A.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/conversation/get"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getConversation API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(A.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.get("".concat(Se,"/message/get/").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while calling getMessages API ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/message/add"),t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error while calling newConversations API ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/file/upload"),t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error while calling newConversations API ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.a.post("".concat(Se,"/message/delete"),t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error while calling deleteMessage API",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(A.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{fetch(n).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),c=document.createElement("a");c.style.display="none",c.href=t;var a=n.split("/").pop();c.download=""+a,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(t)})).catch((function(e){return console.log("Error while downloading the image ",e)}))}catch(c){console.log("Error while downloading the image ",c)}case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(e){var t=new Date(e).getHours(),n=new Date(e).getMinutes();return"".concat(t<10?"0"+t:t,":").concat(n<10?"0"+n:n)},Ue=Object(_.a)(M.a)(O||(O=Object(D.a)(["\n    height: 45px;\n    display: flex;\n    padding: 13px 0;\n    cursor: pointer;\n"]))),Le=Object(_.a)("img")({width:50,height:50,objectFit:"cover",borderRadius:"50%",boxShadow:"-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)"}),We=Object(_.a)(M.a)(f||(f=Object(D.a)(["\n    display: flex;\n"]))),Be=Object(_.a)(Z.a)(g||(g=Object(D.a)(["\n    font-size: 12px;\n    margin-left: auto;\n    color: white;\n    margin-right: 20px;\n"]))),Ne=Object(_.a)(Z.a)(v||(v=Object(D.a)(["\n    display: block;\n    color: white;\n    font-size: 14px;\n    \n"]))),Ge=function(e){var t,n=e.user,c=n.picture||"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png",a=Object(T.useContext)(N.a).setPerson,r=Object(T.useContext)(W.a),o=r.account,s=r.newMessageFlag,i=Object(T.useState)({}),l=Object(G.a)(i,2),u=l[0],d=l[1];Object(T.useEffect)((function(){(function(){var e=Object(A.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De({senderId:o.sub,receiverId:n.sub});case 2:t=e.sent,d({text:null===t||void 0===t?void 0:t.message,timestamp:null===t||void 0===t?void 0:t.updatedAt});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var b=function(){var e=Object(A.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(n),e.next=3,Ae({senderId:o.sub,receiverId:n.sub});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(Ue,{onClick:function(){return b()},children:[Object(ee.jsx)(M.a,{sx:{padding:"0 14px"},children:Object(ee.jsx)(Le,{src:c,alt:"display picture"})}),Object(ee.jsxs)(M.a,{style:{width:"100%"},children:[Object(ee.jsxs)(We,{children:[Object(ee.jsx)(Z.a,{children:n.name}),(null===u||void 0===u?void 0:u.text)&&Object(ee.jsx)(Be,{children:Re(null===u||void 0===u?void 0:u.timestamp)})]}),Object(ee.jsx)(M.a,{children:Object(ee.jsx)(Ne,{children:(null===u||void 0===u||null===(t=u.text)||void 0===t?void 0:t.includes("localhost"))?"media":u.text})})]})]})},He=Object(_.a)(M.a)(m||(m=Object(D.a)(["\n    overflow: overlay;\n    height: 81vh;\n    \n"]))),Ve=Object(_.a)(ke.a)(w||(w=Object(D.a)(["\n    margin: 0 0 0 70px;\n    background-color: #e9edef;\n    opacity: .6;\n"]))),Ke=function(e){var t=e.text,n=Object(T.useState)([]),c=Object(G.a)(n,2),a=c[0],r=c[1],o=Object(T.useContext)(W.a),s=o.account,i=o.socket,l=o.setActiveUsers;return Object(T.useEffect)((function(){(function(){var e=Object(A.a)(E.a.mark((function e(){var n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:n=e.sent,c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),r(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(T.useEffect)((function(){i.current.emit("addUser",s),i.current.on("getUsers",(function(e){l(e)}))}),[s]),Object(ee.jsx)(He,{children:a&&a.map((function(e,t){return e.sub!==s.sub&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Ge,{user:e}),a.length!==t+1&&Object(ee.jsx)(Ve,{})]})}))})},Ye=function(){var e=Object(T.useState)(""),t=Object(G.a)(e,2),n=t[0],c=t[1];return Object(ee.jsxs)(M.a,{children:[Object(ee.jsx)(he,{}),Object(ee.jsx)(ye,{setText:c}),Object(ee.jsx)(Ke,{text:n})]})},Xe=n(154),qe=n(208),Je=n(207),Ze=n(67),Qe=function(){var e=Object(T.useState)([]),t=Object(G.a)(e,2),n=t[0],c=t[1],a=Object(T.useContext)(sn),r=a.event,o=a.deleteMessage,s=a.deleteTheChat,i=a.setDeleteTheChat,l=a.setDisplay,u=a.setDeleted;function d(){return(d=Object(A.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(T.useEffect)((function(){if(r.length>0&&o.length>0)if(function(){var e=n.some((function(e){return e.messageId[0]._id===o[0]._id})),t=n.find((function(e){return e.messageId[0]._id===o[0]._id}));if(!1===r[0].target.checked){var a=n.filter((function(e){return e.messageId[0]._id!==t.messageId[0]._id}));console.log(a,t),c(a)}return!e}()&&r[0].target.checked){var e={even:r[0].target.checked,messageId:o};c((function(t){return[].concat(Object(Ze.a)(t),[e])}))}else console.log("duplicate _id:".concat(o[0]._id))}),[r,o]),console.log(n),Object(T.useEffect)((function(){if(console.log("useEffect working"),!0===s){console.log(s);n.forEach((function(e,t){!0===e.even&&(!function(e){d.apply(this,arguments)}({_id:e.messageId[0]._id,key:"2fE8bK7RmW9oX1Lx3T5Y6Z4DcV7nM0P",conversationId:e.messageId[0].conversationId,text:" "}),console.log("working: ",t))})),i(!1),c([]),l("none"),u(!0),console.log("setting 0")}}),[s]),Object(ee.jsx)(ee.Fragment,{})},$e=n(153),et=Object(_.a)(M.a)(y||(y=Object(D.a)(["\nbackground-color: white; \ncolor: #333333;\n    padding: 9px;\n    max-width: 60%;\n    width: fit-content;\n    display: flex;\n    border-top-left-radius: 20px;\n    border-top-left-radius: 0px;\n    border-top-right-radius: 20px;\n    border-bottom-left-radius: 20px;\n    word-break: break-word;\n    margin-top:5px\n"]))),tt=Object(_.a)(M.a)(k||(k=Object(D.a)(["\nbackground-color: #2979FF; \ncolor: white; \n    padding: 9px;\n    max-width: 60%;\n    width: fit-content;\n    margin-left: auto;\n    display: flex;\n    border-bottom-right-radius: 20px;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 0px;\n    border-top-left-radius: 20px;\n    word-break: break-word;\n    margin-top:5px\n"]))),nt=Object(_.a)(Z.a)(C||(C=Object(D.a)(["\n    font-size: 18px;\n    padding: 0 25px 0 5px;\n"]))),ct=Object(_.a)(Z.a)(F||(F=Object(D.a)(["\n    font-size: 8.5px;\n    color: black;\n    margin-top: 6px;\n    word-break: keep-all;\n    margin-top: 10px;\n"]))),at=(Object(_.a)(M.a)(S||(S=Object(D.a)(["\n    font-size:5px;\n"]))),"2fE8bK7RmW9oX1Lx3T5Y6Z4DcV7nM0P"),rt=Object(T.createContext)({event:[{target:{checked:!1}}],deleteMessage:[{_id:0}]}),ot=function(e){var t=e.message,n=Object(T.useContext)(W.a).account;return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(nt,{children:t.text}),n.sub===t.senderId?Object(ee.jsx)(ct,{style:{color:"white"},children:Re(t.createdAt)}):Object(ee.jsx)(ct,{children:Re(t.createdAt)})]})},st=function(e){var t,n=e.message,c=Object(T.useContext)(W.a).account;return Object(ee.jsxs)("div",{style:{position:"relative"},children:[(null===n||void 0===n||null===(t=n.text)||void 0===t?void 0:t.includes(".pdf"))?Object(ee.jsxs)("div",{style:{display:"flex"},children:[Object(ee.jsx)("img",{src:"https://cdn4.iconfinder.com/data/icons/logos-and-brands/512/27_Pdf_File_Type_Adobe_logo_logos-512.png",alt:"pdf-icon",style:{width:80}}),Object(ee.jsx)(Z.a,{style:{fontSize:14},children:n.text.split("/").pop()})]}):Object(ee.jsx)("img",{style:{width:300,height:"100%",objectFit:"cover"},src:n.text,alt:n.text}),c.sub===n.senderId?Object(ee.jsxs)(ct,{style:{position:"absolute",bottom:0,right:0,color:"white"},children:[Object(ee.jsx)(Je.a,{onClick:function(e){return Me(e,n.text)},fontSize:"small",style:{marginRight:10,border:"1px solid black",borderRadius:"50%",color:"white"}}),Re(n.createdAt)]}):Object(ee.jsxs)(ct,{style:{position:"absolute",bottom:0,right:0,color:"white"},children:[Object(ee.jsx)(Je.a,{onClick:function(e){return Me(e,n.text)},fontSize:"small",style:{marginRight:10,border:"1px solid grey",borderRadius:"50%",color:"black"}}),Re(n.createdAt)]})]})};var it,lt,ut,dt,bt,jt,pt,xt,ht,Ot,ft,gt,vt,mt,wt,yt,kt,Ct,Ft,St,It,Et,At,Dt,Tt,zt,Pt,_t,Mt=function(e){var t=e.message,n=e.display,c=(e.setDisplay,Object(T.useContext)(W.a).account),a=Object(T.useContext)(sn),r=a.setEvent,o=a.setDeleteMessage;function s(e,t){r([e]),o([t])}return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(rt.Provider,{value:"",children:c.sub===t.senderId?Object(ee.jsxs)(tt,{children:[t.text===at?Object(ee.jsxs)("deletedChat",{style:{fontSize:"18px"},children:["Message Deleted ",Object(ee.jsx)($e.a,{})]}):"file"===t.type?Object(ee.jsx)(st,{message:t}):Object(ee.jsx)(ot,{message:t}),t.text===at?null:Object(ee.jsx)("input",{type:"checkbox",style:{display:n},onChange:function(e){s(e,t)}})]}):Object(ee.jsxs)(et,{children:[t.text===at?null:Object(ee.jsx)("input",{type:"checkbox",style:{display:n},onChange:function(e){s(e,t)}}),t.text===at?Object(ee.jsxs)("deletedChat",{style:{fontSize:"18px"},children:[" Message Deleted ",Object(ee.jsx)($e.a,{})]}):"file"===t.type?Object(ee.jsx)(st,{message:t}):Object(ee.jsx)(ot,{message:t})]})})})},Rt=n(155),Ut=Object(_.a)(M.a)(it||(it=Object(D.a)(["\n    height: 44px;\n    background: black;\n    color:white;\n    display: flex;\n    padding: 8px 16px;\n    align-items: center;\n    \n    z-index:3;\n"]))),Lt=Object(_.a)("img")({width:40,height:40,objectFit:"cover",borderRadius:"50%"}),Wt=Object(_.a)(Z.a)(lt||(lt=Object(D.a)(["\n    margin-left: 12px !important;\n"]))),Bt=Object(_.a)(M.a)(ut||(ut=Object(D.a)(["\n    margin-left: auto;\n    & > svg {\n        padding: 8px;\n        font-size: 22px;\n        color: #000;\n    }\n"]))),Nt=Object(_.a)(Z.a)(dt||(dt=Object(D.a)(["\n    font-size: 12px !important;\n    color: white;\n    boxShadow: '-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)'\n    margin-left: 12px !important;\n"]))),Gt=function(e){var t=e.person,n=e.display,c=e.setDisplay,a=t.picture||"https://static.straitstimes.com.sg/s3fs-public/articles/2020/12/01/af_moneyheist_011220.jpg",r=Object(T.useContext)(W.a).activeUsers,o=Object(T.useContext)(sn),s=o.setDeleteTheChat,i=o.getTyping,l=o.deleteTheChat;return Object(ee.jsxs)(Ut,{children:[Object(ee.jsx)(Lt,{src:a,alt:"display picture",sx:{boxShadow:"-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)"}}),Object(ee.jsxs)(M.a,{children:[Object(ee.jsx)(Wt,{children:t.name}),Object(ee.jsx)(Nt,{children:i?"typing...":(null===r||void 0===r?void 0:r.find((function(e){return e.sub===t.sub})))?"online":"offline"})]}),Object(ee.jsxs)(Bt,{children:["block"===n&&Object(ee.jsx)(qe.a,{onClick:function(){console.log(l),s(!l)},style:{color:"white"}}),Object(ee.jsx)(fe.a,{style:{color:"white"}}),Object(ee.jsx)(V.a,{style:{color:"white"}})]}),Object(ee.jsx)(Xe.a,{onClick:function(){c("none"===n?"block":"none")},value:Rt.a})]})},Ht=n(24),Vt=n(216),Kt=(n(30),n(209)),Yt=n(210),Xt=n(211),qt=n(156),Jt=Object(_.a)(M.a)(bt||(bt=Object(D.a)(["\n    height: 55px;\n    background: black;\n    width: 100%;\n    display: flex;\n    align-items: center;\n     padding:8px;\n    margin-bottom:0;\n    border-bottom-right-radius:8px;\n"]))),Zt=Object(_.a)(M.a)(jt||(jt=Object(D.a)(["\n    border-radius: 18px;\n    background-color: #FFFFFF;\n    width: calc(94% - 100px);\n"]))),Qt=Object(_.a)(Oe.a)(pt||(pt=Object(D.a)(["\n    width: 100%;\n    padding: 20px;\n    padding-left: 25px;\n    font-size: 14px;\n    height: 20px;\n    width: 100%;\n    boxShadow: '-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)'\n    \n"]))),$t=Object(_.a)(Kt.a)(xt||(xt=Object(D.a)(["\n    transform: 'rotate(40deg)'\n"]))),en=function(e){var t=e.sendText,n=e.value,c=e.setValue,a=e.setFile,r=e.file,o=e.setImage,s=e.setIsTyping,i=Object(T.useState)(!1),l=Object(G.a)(i,2),u=l[0],d=l[1];Object(T.useEffect)((function(){(function(){var e=Object(A.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return(t=new FormData).append("name",r.name),t.append("file",r),e.prev=4,e.next=7,Pe(t);case 7:n=e.sent,o(n.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}})()()}),[r]);return Object(ee.jsxs)(Jt,{children:[u&&Object(ee.jsx)(qt.a,{onEmojiSelect:function(e){return c(e.native)},onEmojiClick:function(e){c(n+e.emoji),d(!1)},pickerStyle:{position:"absolute",bottom:"60px"},theme:"dark"}),Object(ee.jsx)(Yt.a,{style:{color:"white"},onClick:function(){!1===u?d(!0):(console.log("picker"),d(!1))}}),Object(ee.jsx)("label",{htmlFor:"fileInput",style:{color:"white"},children:Object(ee.jsx)($t,{})}),Object(ee.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return function(e){c(e.target.files[0].name),a(e.target.files[0])}(e)}}),Object(ee.jsx)(Zt,{children:Object(ee.jsx)(Qt,{placeholder:"Type a message",inputProps:{"aria-label":"search"},onChange:function(e){!function(e){c(e.target.value);var t=e.target.value;s(""!==t)}(e)},onKeyPress:function(e){return t(e)},value:n,onBlur:function(){s(!1)},onFocus:function(){s(!0)},onKeyUp:function(){s(!1)},sx:{boxShadow:"-1px 1px 7px rgba(255, 255, 255, 0.4),1px 1px 7px rgba(255, 255, 255, 0.4)"}})}),Object(ee.jsx)(Xt.a,{style:{color:"white"}})]})},tn=n(22),nn=n(158),cn=(n(157),Object(_.a)(M.a)(ht||(ht=Object(D.a)(["\nbackground-color: #D9AFD9;\nbackground-image: linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%);\n    background-size: 50%;\n    border-radius:8px;\n    width:100%\n    \n"])))),an=(Object(_.a)(M.a)(Ot||(Ot=Object(D.a)(["\n    height: 55px;\n    background: #ededed;\n    // position: absolute;\n    width: 100%;\n    // bottom: 0\n"]))),Object(_.a)(M.a)(ft||(ft=Object(D.a)(["\n    height: 80vh;\n    overflow-y: scroll;\n"])))),rn=Object(_.a)(M.a)(gt||(gt=Object(D.a)(["\n    padding: 1px 80px;\n"]))),on=(Object(_.a)(Vt.a)(vt||(vt=Object(D.a)(["\n    \n"]))),function(e){var t,n,c=e.person,a=e.conversation,r=e.display,o=e.setDisplay,s=Object(T.useState)([]),i=Object(G.a)(s,2),l=i[0],u=i[1],d=Object(T.useState)(null),b=Object(G.a)(d,2),j=b[0],p=b[1],x=Object(T.useState)(),h=Object(G.a)(x,2),O=h[0],f=h[1],g=Object(T.useState)(),v=Object(G.a)(g,2),m=v[0],w=v[1],y=Object(T.useState)(),k=Object(G.a)(y,2),C=k[0],F=k[1],S=Object(T.useState)(!1),I=Object(G.a)(S,2),D=I[0],z=I[1],P=Object(T.useRef)(),_=Object(T.useContext)(W.a),M=_.account,R=_.socket,U=_.newMessageFlag,L=_.setNewMessageFlag,B=null===a||void 0===a||null===(t=a.members)||void 0===t?void 0:t.find((function(e){return e!==M.sub})),N=Object(T.useContext)(sn),H=N.typing,V=N.setIsTyping,K=N.setGetTyping,Y=N.getTyping,X=N.deleted,q=N.setDeleted;Object(T.useEffect)((function(){var e={};H&&(e={senderId:M.sub,receiverId:B,conversationId:a._id,type:"text",text:H},B&&R.current.emit("typing",e),V(!1),console.log("working"))}),[H]),Object(T.useEffect)((function(){R.current.on("typer",(function(e){K(!0)})),setTimeout((function(){K(!1)}),2e3)}),[Y]),Object(T.useEffect)((function(){R.current.on("getMessage",(function(e){p(Object(Ht.a)(Object(Ht.a)({},e),{},{createdAt:Date.now().toLocaleString()}))}))}),[]),Object(T.useEffect)((function(){var e={senderId:M.sub,receiverId:B,conversationId:a._id};X&&B&&R.current.emit("deleted",e)}),[X]),Object(T.useEffect)((function(){R.current.on("deletion",(function(e){q(!0)}))}),[]),Object(T.useEffect)((function(){R.current.on("offline",(function(){z(!0),setTimeout((function(){z(!1)}),5e3)}))}),[Y]),Object(T.useEffect)((function(){(function(){var e=Object(A.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(null===a||void 0===a?void 0:a._id);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),q(!1)}),[null===a||void 0===a?void 0:a._id,c._id,U]),Object(T.useEffect)((function(){(function(){var e=Object(A.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(null===a||void 0===a?void 0:a._id);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),q(!1)}),[X]),Object(T.useEffect)((function(){var e;null===(e=P.current)||void 0===e||e.scrollIntoView({transition:"smooth"})}),[l]),Object(T.useEffect)((function(){var e;j&&(null===a||void 0===a||null===(e=a.members)||void 0===e?void 0:e.includes(j.senderId))&&u((function(e){return[].concat(Object(Ze.a)(e),[j])}))}),[j,a]);var J=null===a||void 0===a||null===(n=a.members)||void 0===n?void 0:n.find((function(e){return e!==M.sub})),Z=function(){var e=Object(A.a)(E.a.mark((function e(t){var n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,O){e.next=3;break}return e.abrupt("return");case 3:if(13!==n){e.next=13;break}return c={},c=m?{senderId:M.sub,conversationId:a._id,receiverId:J,type:"file",text:C}:{senderId:M.sub,receiverId:J,conversationId:a._id,type:"text",text:O},R.current.emit("sendMessage",c),e.next=9,ze(c);case 9:f(""),w(),F(""),L((function(e){return!e}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsxs)(cn,{children:[Object(ee.jsx)("div",{className:"offline-container",style:{display:D?"flex":"none"},children:Object(ee.jsxs)("span",{className:"offline",children:["User Offline ",Object(ee.jsx)(nn.a,{})]})}),Object(ee.jsxs)(an,{children:[l&&l.map((function(e,t){return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(rn,{ref:P,children:Object(ee.jsx)(Mt,{message:e,display:r,setDisplay:o},t)})})})),Y&&Object(ee.jsx)("div",{className:"chat-bubble",children:Object(ee.jsxs)("div",{className:"typing",children:[Object(ee.jsx)("div",{className:"dot"}),Object(ee.jsx)("div",{className:"dot"}),Object(ee.jsx)("div",{className:"dot"})]})})]}),Object(ee.jsx)(Qe,{}),Object(ee.jsx)(en,{sendText:Z,value:O,setValue:f,setFile:w,file:m,setImage:F,setIsTyping:V})]})})}),sn=Object(T.createContext)(null),ln=function(){var e=Object(T.useContext)(N.a).person,t=Object(T.useContext)(W.a).account,n=Object(T.useState)("none"),c=Object(G.a)(n,2),a=c[0],r=c[1],o=Object(T.useState)({}),s=Object(G.a)(o,2),i=s[0],l=s[1],u=Object(T.useState)([]),d=Object(G.a)(u,2),b=d[0],j=d[1],p=Object(T.useState)(!1),x=Object(G.a)(p,2),h=x[0],O=x[1],f=Object(T.useState)(!1),g=Object(G.a)(f,2),v=g[0],m=g[1],w=Object(T.useState)([]),y=Object(G.a)(w,2),k=y[0],C=y[1],F=Object(T.useState)(!1),S=Object(G.a)(F,2),I=S[0],D=S[1],z=Object(T.useState)(!1),P=Object(G.a)(z,2),_=P[0],R=P[1];return Object(T.useEffect)((function(){(function(){var n=Object(A.a)(E.a.mark((function n(){var c;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,De({senderId:t.sub,receiverId:e.sub});case 2:c=n.sent,l(c);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e.sub]),Object(ee.jsx)(M.a,{style:{height:"75%"},children:Object(ee.jsxs)(sn.Provider,{value:{event:k,setEvent:C,deleteMessage:b,setDeleteMessage:j,deleteTheChat:h,setDeleteTheChat:O,setDisplay:r,typing:I,setIsTyping:D,getTyping:_,setGetTyping:R,deleted:v,setDeleted:m},children:[Object(ee.jsx)(Gt,{person:e,display:a,setDisplay:r}),Object(ee.jsx)(on,{person:e,conversation:i,display:a,setDisplay:r})]})})},un=Object(_.a)(M.a)(mt||(mt=Object(D.a)(["\n    background: #f8f9fa;\n    padding: 30px 0;\n    text-align: center;\n    height: 100%;\n"]))),dn=Object(_.a)(M.a)(wt||(wt=Object(D.a)(["\n    padding: 0 200px;\n"]))),bn=Object(_.a)("img")({marginTop:100,width:400}),jn=Object(_.a)(Z.a)(yt||(yt=Object(D.a)(["\n    font-size: 32px;\n    font-family: inherit;\n    font-weight: 300;\n    color: #41525d;\n    margin-top: 25px 0 10px 0;\n"]))),pn=Object(_.a)(Z.a)(kt||(kt=Object(D.a)(["\n    font-size: 14px;\n    color: #667781;\n    font-weight: 400;\n    font-family: inherit;\n"]))),xn=Object(_.a)(ke.a)(Ct||(Ct=Object(D.a)(["\n    margin: 40px 0;\n    opacity: 0.4;\n"]))),hn=function(){return Object(ee.jsx)(un,{children:Object(ee.jsxs)(dn,{children:[Object(ee.jsx)(bn,{src:J,alt:"empty"}),Object(ee.jsx)(jn,{children:"ChatPulse"}),Object(ee.jsx)(pn,{children:"Now send and receive messages without keeping your phone online."}),Object(ee.jsx)(pn,{children:"Use WhatsApp on up to 4 linked devices and 1 phone at the same time. "}),Object(ee.jsx)(xn,{})]})})},On=Object(_.a)(M.a)(Ft||(Ft=Object(D.a)(["\n    display: flex;\n    border-radius:5px;\n"]))),fn=Object(_.a)(M.a)(St||(St=Object(D.a)(["\n    min-width: 300px;\n    background-color:black;\n    color:white\n"]))),gn=Object(_.a)(M.a)(It||(It=Object(D.a)(["\n    width: 80%;\n    min-width: 300px;\n    height: 100%;\n    border-left: 1px solid rgba(0, 0, 0, 0.14);\n"]))),vn={height:"95%",width:"100%",margin:"20px",maxWidth:"100%",maxHeight:"100%",borderRadius:"8px",boxShadow:"none",overflow:"hidden"},mn=function(){var e=Object(T.useContext)(N.a).person;return Object(ee.jsx)(B.a,{open:!0,BackdropProps:{style:{backgroundColor:"unset"}},PaperProps:{sx:vn},maxWidth:"md",children:Object(ee.jsxs)(On,{children:[Object(ee.jsx)(fn,{children:Object(ee.jsx)(Ye,{})}),Object(ee.jsx)(gn,{children:Object.keys(e).length?Object(ee.jsx)(ln,{}):Object(ee.jsx)(hn,{})})]})})},wn=n(229),yn=n(218),kn=Object(_.a)(M.a)(Et||(Et=Object(D.a)(["\n    display: flex; \n"]))),Cn=Object(_.a)(M.a)(At||(At=Object(D.a)(["\n    padding: 56px 0 56px 56px;\n"]))),Fn=Object(_.a)("img")({margin:"50px 0 0 50px",height:264,width:264}),Sn=Object(_.a)(Z.a)(Dt||(Dt=Object(D.a)(["\n    font-size: 26px;\n    margin-bottom: 25px;\n    color: #525252;\n    font-family: Segoe UI,Helvetica Neue,Helvetica,Lucida Grande,Arial,Ubuntu,Cantarell,Fira Sans,sans-serif;\n    font-weight: 300;\n"]))),In=Object(_.a)(wn.a)(Tt||(Tt=Object(D.a)(["\n    &  > li {\n        padding: 0;\n        margin-top: 15px;\n        font-size: 18px;\n        line-height: 28px;\n        color: #4a4a4a;\n    }\n"]))),En={marginTop:"12%",height:"95%",width:"60%",maxWidth:"100",maxHeight:"100%",borderRadius:0,boxShadow:"none",overflow:"hidden"},An=function(){var e=Object(T.useContext)(W.a),t=e.setAccount,n=e.showloginButton,c=e.setShowloginButton,a=e.setShowlogoutButton,r=function(){var e=Object(A.a)(E.a.mark((function e(n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(L.a)(n.credential),P.a.set("Gid",n.credential),t(r),c(!1),a(!0),e.next=7,Ie(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(B.a,{open:!0,BackdropProps:{style:{backgroundColor:"unset"}},maxWidth:"md",PaperProps:{sx:En},children:Object(ee.jsxs)(kn,{children:[Object(ee.jsxs)(Cn,{children:[Object(ee.jsx)(Sn,{children:"To use WhatsApp on your computer:"}),Object(ee.jsxs)(In,{children:[Object(ee.jsx)(yn.a,{children:"1. Open WhatsApp on your phone"}),Object(ee.jsx)(yn.a,{children:"2. Tap Menu Settings and select WhatsApp Web"}),Object(ee.jsx)(yn.a,{children:"3. Point your phone to this screen to capture the code"})]})]}),Object(ee.jsxs)(M.a,{style:{position:"relative"},children:[Object(ee.jsx)(Fn,{src:"https://www.ginifab.com/feeds/qr_code/img/qrcode.jpg",alt:"QR Code"}),Object(ee.jsx)(M.a,{style:{position:"absolute",top:"50%",transform:"translateX(25%) translateY(-25%)"},children:n?Object(ee.jsx)(X.a,{buttonText:"",onSuccess:r,onError:function(e){console.log("Login Failed:",e)}}):null})]})]})})})},Dn=Object(_.a)(M.a)(zt||(zt=Object(D.a)(["\n    height: 100vh;\n    background: #ECF8F9;\n    border-radius:8px;\n"]))),Tn=Object(_.a)(R.a)(Pt||(Pt=Object(D.a)(["\n    background-color: #D9AFD9;\n    background-image: linear-gradient(0deg, #D9AFD9 0%, #97D9E1 100%);\n    background-size: 50%;\n    height: 125px;\n    box-shadow: none;\n"]))),zn=Object(_.a)(R.a)(_t||(_t=Object(D.a)(["\n    background: #00bfa5;\n    height: 200px;\n    box-shadow: none;\n"])));t.default=function(){var e,t=Object(T.useContext)(W.a),n=t.account,c=t.setAccount,a=t.setShowloginButton,r=t.setShowlogoutButton;e=P.a.get("Gid");var o=function(){var t=Object(A.a)(E.a.mark((function t(n){var o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(L.a)(e),c(o),a(!1),r(!0),t.next=6,Ie(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(T.useEffect)((function(){e&&o()}),[]),Object(ee.jsx)(Dn,{children:n?Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsxs)(T.Suspense,{fallback:Object(ee.jsx)(tn.a,{}),children:[Object(ee.jsx)(Tn,{children:Object(ee.jsx)(U.a,{})}),Object(ee.jsx)(mn,{})]})}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(zn,{children:Object(ee.jsx)(U.a,{})}),Object(ee.jsx)(An,{})]})})}}}]);
//# sourceMappingURL=4.f4fc2c81.chunk.js.map